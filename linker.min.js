var checkDatabase=function(a){return!!localStorage[a]},save=function(a,o){localStorage[a]=10*o;var n=new Date;localStorage["gd-retrieval-date"]=n.toDateString()},load=function(a){return localStorage[a]},genIP=function(){return randomInt()+"."+randomInt()+"."+randomInt()+"."+randomInt()},randomInt=function(){return Math.floor(220*Math.random()+15)},gdinfo=function(a,o){var n=new Date,t=load(o),e=new Date(localStorage["gd-retrieval-date"]),r=864e5;if(checkDatabase(o)&&Math.round(Math.abs((n.getTime()-e.getTime())/r))<7){var l=t/10;a.find(".glassdoor-rating").html(l)}else{var s=new XMLHttpRequest;const n=51706,t="xBpFKWDKEM";var i="https://cors-anywhere.herokuapp.com/",c="https://api.glassdoor.com/api/api.htm?v=1&format=json&t.p="+n+"&t.k="+t+"&action=employers&userip="+genIP()+"&useragent="+navigator.userAgent+"&q="+o;s.open("GET",i+c,!0),s.onreadystatechange=function(){if(200==s.status){var n=JSON.parse(s.responseText||"null");if(null!=n){if(1==n.success){console.log(n);var t=n.response.employers[0].overallRating;console.log(t),save(o,t),a.find(".glassdoor-rating").html(t)}if(0==n.success){var e="Requests throttled by Glassdoor. Try again in a few minutes";a.find(".glassdoor-rating").html(e)}}}else{e="Could not contact Glassdoor servers";a.find("glassdoor-rating").html(e)}},s.send()}};$("[data-control-name='job_card_company_link']").each(function(){$(this).append("<div class='glassdoor-label-wrapper'><div class='glassdoor-label'>Rating: <span class='glassdoor-rating'></span><div><a class='glassdoor-link' style='color:white' href='http://www.glassdoor.com/index.htm'>Powered by  <img style='margin-left:6px' src='http://www.glassdoor.com/static/img/api/glassdoor_logo_80.png' title='Job Search' /></a></div></div></div>")}),$("[data-control-name='job_card_company_link'] .glassdoor-label").each(function(){$(this).hide()}),$("[data-control-name='job_card_company_link']").hover(function(){var a=$(this).html(),o=a.split("\n")[0];console.log(o);var n=$(this);if(void 0!==o){$(this).find(".glassdoor-label").toggle();var t=o.replace("<b>","").replace("</b>","");gdinfo(n,t)}}),$(".pagination a").click(function(){window.location.reload()}),$(".submit-advs").click(function(){window.location.reload()}),$(".label-container").click(function(){window.location.reload()}),console.log("Glassdoor-Linkedinator loaded");